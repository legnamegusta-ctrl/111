<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Gestão de Gado de Corte</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <h1>Gestão de Gado de Corte</h1>
    <nav class="tabs">
      <button type="button" data-tab="rebanho" aria-selected="true"><span class="icon" data-feather="list"></span>Rebanho</button>
      <button type="button" data-tab="pesagens" aria-selected="false"><span class="icon" data-feather="activity"></span>Pesagens</button>
      <button type="button" data-tab="custos" aria-selected="false"><span class="icon" data-feather="dollar-sign"></span>Custos</button>
      <button type="button" data-tab="vendas" aria-selected="false"><span class="icon" data-feather="shopping-cart"></span>Vendas</button>
      <button type="button" data-tab="saude" aria-selected="false"><span class="icon" data-feather="heart"></span>Saúde</button>
      <button type="button" data-tab="relatorios" aria-selected="false"><span class="icon" data-feather="bar-chart-2"></span>Relatórios</button>
      <button type="button" data-tab="planejamento" aria-selected="false"><span class="icon" data-feather="calendar"></span>Planejamento</button>
      <button type="button" data-tab="alertas" aria-selected="false"><span class="icon" data-feather="bell"></span>Alertas</button>
    </nav>
  </header>
  <div class="sync-area"><div id="syncStatus"></div><button id="manualSync">Sincronizar</button></div>
  <div id="scanOverlay" class="hidden"><p>Aproxime a etiqueta ou enquadre o código</p></div>
  <main class="container">
    <section id="tab-rebanho">
      <h2>Rebanho</h2>
      <form id="form-rebanho">
        <fieldset class="step" data-step="0">
          <label for="animalId">ID</label>
          <input type="text" id="animalId">
          <button type="button" id="scanTag">Ler RFID/QR</button>
          <label for="nascimento">Data Nascimento</label>
          <input type="date" id="nascimento">
          <label for="raca">Raça</label>
          <input type="text" id="raca">
          <label for="status">Status</label>
          <select id="status">
            <option value="ativo">Ativo</option>
            <option value="vendido">Vendido</option>
          </select>
          <label for="brinco">Brinco</label>
          <input type="text" id="brinco" required>
          <button type="button" class="nextStep">Próximo</button>
        </fieldset>
        <fieldset class="step hidden" data-step="1">
          <label for="peso">Peso (kg)</label>
          <input type="number" id="peso" required>
          <label for="fornecedor">Fornecedor</label>
          <input type="text" id="fornecedor">
          <label for="preco">Preço (R$)</label>
          <input type="number" id="preco">
          <label for="pesoEntrada">Peso Entrada (kg)</label>
          <input type="number" id="pesoEntrada">
          <div class="step-nav">
            <button type="button" class="prevStep">Voltar</button>
            <button type="submit">Salvar</button>
          </div>
        </fieldset>
      </form>
      <input type="text" id="searchRebanho" placeholder="Buscar por brinco ou ID">
      <table id="rebanho-list">
        <thead>
          <tr><th>ID</th><th>Nasc.</th><th>Raça</th><th>Status</th><th>Brinco</th><th>Peso</th><th>Fornecedor</th><th>Preço</th><th>Peso Entrada</th><th></th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
    <section id="tab-pesagens" class="hidden">
      <h2>Pesagens</h2>
      <form id="form-pesagem">
        <label for="pesagemAnimalId">Animal</label>
        <select id="pesagemAnimalId"></select>
        <label for="pesoPesagem">Peso (kg)</label>
        <input type="number" id="pesoPesagem" required>
        <label for="dataPesagem">Data</label>
        <input type="date" id="dataPesagem" required>
        <label for="operadorPesagem">Operador</label>
        <input type="text" id="operadorPesagem" required>
        <button type="submit">Salvar</button>
      </form>
      <table id="pesagens-list">
        <thead>
          <tr><th>Data</th><th>Brinco</th><th>Peso</th><th>Operador</th></tr>
        </thead>
        <tbody></tbody>
      </table>
      <canvas id="pesosChart"></canvas>
    </section>
    <section id="tab-custos" class="hidden">
      <h2>Custos</h2>
      <form id="form-custo">
        <label for="custoDesc">Descrição</label>
        <input type="text" id="custoDesc" required>
        <label for="custoValor">Valor (R$)</label>
        <input type="number" id="custoValor" required>
        <button type="submit">Salvar</button>
      </form>
      <table id="custos-list">
        <thead>
          <tr><th>Descrição</th><th>Valor (R$)</th></tr>
        </thead>
        <tbody></tbody>
      </table>
      <p>Total: R$ <span id="custos-total">0.00</span></p>
    </section>
    <section id="tab-vendas" class="hidden">
      <h2>Vendas</h2>
      <form id="form-venda">
        <label for="precoArroba">Preço (@)</label>
        <input type="number" id="precoArroba" required>
        <div id="vendaAnimais"></div>
        <button type="submit">Salvar</button>
      </form>
      <table id="vendas-list">
        <thead>
          <tr><th>Data</th><th>Qtd Animais</th><th>Preço (@)</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
    <section id="tab-saude" class="hidden">
      <h2>Saúde</h2>
      <form id="form-tratamento">
        <label for="tratAnimalId">Animal</label>
        <select id="tratAnimalId"></select>
        <label for="tratTipo">Tipo</label>
        <input type="text" id="tratTipo" required>
        <label for="tratDesc">Descrição</label>
        <input type="text" id="tratDesc">
        <label for="tratData">Data Aplicação</label>
        <input type="date" id="tratData" required>
        <label for="tratProx">Próxima Dose</label>
        <input type="date" id="tratProx">
        <label for="tratDocs">Documentos</label>
        <input type="file" id="tratDocs" multiple>
        <button type="submit">Salvar</button>
      </form>
      <table id="tratamentos-list">
        <thead>
          <tr><th>Brinco</th><th>Tipo</th><th>Data</th><th>Próxima Dose</th><th>Documentos</th></tr>
        </thead>
        <tbody></tbody>
      </table>
      <h3>Lembretes</h3>
      <ul id="tratamentos-reminders"></ul>
    </section>
    <section id="tab-relatorios" class="hidden">
      <h2>Relatórios</h2>
      <div class="kpis">
        <div class="kpi">Cabeças: <span id="kpi-cabecas">0</span></div>
        <div class="kpi">Peso médio (kg): <span id="kpi-peso-medio">0</span></div>
        <div class="kpi">Peso total (kg): <span id="kpi-peso-total">0</span></div>
        <div class="kpi">Arrobas totais: <span id="kpi-arrobas">0</span></div>
        <div class="kpi">Break-even (R$/@): <span id="kpi-break-even">0</span></div>
      </div>
      <div class="exports">
        <button id="exportCsv">Exportar CSV</button>
        <button id="exportPdf">Exportar PDF</button>
      </div>
    </section>
    <section id="tab-planejamento" class="hidden">
      <h2>Planejamento</h2>
      <table id="planejamento-list">
        <thead>
          <tr><th>Brinco</th><th>Peso Atual (kg)</th><th>Peso Previsto (30d)</th><th>Ganho Diário (kg)</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
    <section id="tab-alertas" class="hidden">
      <h2>Alertas</h2>
      <p id="alerta-custo"></p>
      <table id="alertas-list">
        <thead>
          <tr><th>Brinco</th><th>Ganho Diário (kg)</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
  </main>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <script src="firebaseConfig.js"></script>
  <script src="scanner.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
  <script src="app.js"></script>
  <div id="toast" class="hidden"></div>
</body>
</html>
